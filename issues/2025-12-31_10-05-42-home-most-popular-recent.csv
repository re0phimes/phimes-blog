"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"HOMEHL-010","P0","1","both","盘点现有数据并确定 Most Popular 口径","梳理构建期可用的 post 元数据与当前热度展示方式，输出明确的 Most Popular 数据来源决策（MVP 先策展/置顶，统计式后置）。","在仓库内形成单一决策记录（写入 plan 或补充到 docs/issue notes）；确认 postData 不包含 PV 字段；明确 MVP 采用策展式（top/frontmatter 或 themeConfig 列表）并列出后续统计式增强的前置条件。","AUTOFRONTEND","Review 决策是否可执行且可回滚；确认不引入构建期强依赖外部网络；确认后续实现不会破坏现有 postData 排序/分页。","回归时检查首页模块在无外部统计数据情况下仍可工作；构建无网络/接口不可用时不会失败（如后续选择统计式，必须有降级）。","已完成","已完成","已完成","已提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:16;.vitepress/theme/utils/getPostData.mjs:33;.vitepress/config.mjs:17;.vitepress/theme/views/Post.vue:41","picked_reason:决策先行以解锁后续实现(保持 Most Popular 为策展式、统计式后置) | decision:MVP Most Popular=策展式(配置显式列表优先),统计式后置 | evidence:postData 由 .vitepress/config.mjs 构建期注入,字段不含 PV;文章页 PV/热度为 Post.vue 中 artalk/twikoo DOM 注入(运行时) | future_prereq:若需真实热门需确定数据源(Artalk/Twikoo/Clarity等)API+缓存(popular.json)+超时/降级策略 | done_at:2025-12-31T10:21:45"
"HOMEHL-020","P0","2","frontend","定义首页 Highlights 的展示边界与配置项","将首页 Highlights 的出现条件、展示条数与文案等做成可配置项，作为后续实现的边界合同。","存在明确的配置入口（例如 themeConfig.home.*）；支持设置 popular/recent 展示条数；首页仅在 / 的第一页展示（不在 /page/2+、分类/标签页展示）。","AUTOFRONTEND","Review 配置项命名是否清晰且默认值安全；确认对旧配置向后兼容（无配置时保持现有首页不变）。","回归时验证不同路由（/、/page/2、/pages/categories/*、/pages/tags/*）行为符合边界合同；暗色模式下文案与 hover 对比度正常。","已完成","已完成","已完成","已提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:21;index.md:1;.vitepress/theme/views/Home.vue:1;themeConfig.mjs:1;.vitepress/init.mjs:8","picked_reason:先落盘配置入口(后续 selector/组件/接入均依赖) | evidence:themeConfig 已新增 home.highlights 配置入口(含 mostPopular/recentPosts 标题与 limit) | evidence:node 可成功 import themeConfig.mjs 并读取 home.highlights.mostPopular.limit | done_at:2025-12-31T10:25:38"
"HOMEHL-030","P0","3.1","frontend","实现策展式 Most Popular 数据源（MVP）","实现 Most Popular 的策展来源（优先推荐 themeConfig 显式列表，其次可扩展为 frontmatter 字段），保证顺序可控且可去重。","Most Popular 可以通过配置得到稳定列表（顺序固定）；缺失文章路径会被忽略且不会导致页面报错；与 Recent 列表去重后仍能保证最少展示 N 条（不足则允许少于 N）。","AUTOFRONTEND","Review 是否避免在构建期/运行时引入 window；确认映射规则（regularPath/id）清晰且可维护；确认去重规则一致。","回归时检查置顶文章（top）与 Most Popular 的交互逻辑符合预期；文章元数据缺失（无 tags/categories/description）不会破坏渲染。","已完成","已完成","已完成","已提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:26;themeConfig.mjs:223;.vitepress/config.mjs:58;.vitepress/theme/utils/getPostData.mjs:47;.vitepress/theme/utils/homeSections.mjs:16;.vitepress/theme/utils/getPostData.mjs:65","picked_reason:先让 postData 支持 popular 标记/排序字段(为后续 selector/组件提供数据源) | evidence:postData 已支持 popular/popularRank 字段(从 frontmatter popular/popular_rank/popularRank 读取) | evidence:新增 selectMostPopularPosts() 支持 curated 稳定顺序、缺失 path 忽略、excludeIds 去重与 fallback 填充 | evidence:已用 node --input-type=module 调用 selector 验证 curated 顺序与缺失 path 不报错 | done_at:2025-12-31T10:31:09"
"HOMEHL-040","P2","3.2","both","（可选）接入统计式 Most Popular（外部 PV/热度源）","若后续需要真实“Most Popular”，对接 Artalk/Twikoo/Clarity 等数据源并在构建期缓存，提供降级到策展式的回退策略。","当外部统计接口可用时，可生成并使用缓存（例如 popular.json）；当接口不可用/超时/无网络时，构建与页面仍可正常工作并自动降级到策展式；不引入对生产构建稳定性的硬依赖。","AUTOE2E","Review 必须包含缓存策略、超时与错误处理；确认不会泄露 API Key；确认统计字段映射到 postData 是可解释且可审计的。","回归时验证：外部接口可用/不可用两种场景；不同评论系统配置（artalk/twikoo/关闭）下均不影响首页渲染与构建。","未开始","未开始","未开始","未提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:31;.vitepress/theme/views/Post.vue:41;themeConfig.mjs:324;.vitepress/theme/utils/initComments.mjs:1",""
"HOMEHL-050","P0","4","frontend","实现首页 Recent/Popular 选择器（SSR 安全 + 去重）","新增纯函数 selector，基于 theme.postData 与配置生成 recentPosts 与 mostPopularPosts，并确保 SSR/构建期安全。","selector 不访问 window/localStorage；recentPosts 默认按 date 倒序；popularPosts 依配置来源映射到 postData；两列表按规则去重且对缺失字段容错；vitepress build 无 SSR 报错。","AUTOFRONTEND","Review selector 是否保持纯函数与不可变数据；确认性能（O(n) 级别）且不会在渲染时重复重算过多；确认排序规则与 top 逻辑一致/可解释。","回归时验证：postData 为空/不足条数/部分文章缺少 date 时的降级；分页/分类/标签页不受 selector 影响。","已完成","已完成","已完成","已提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:35;.vitepress/theme/utils/getPostData.mjs:47;.vitepress/theme/views/Home.vue:35;.vitepress/config.mjs:58;.vitepress/theme/utils/homeSections.mjs:16;.vitepress/theme/utils/homeSections.mjs:104;.vitepress/theme/utils/homeSections.mjs:149","picked_reason:补齐 recentPosts 与去重逻辑,为 UI 组件提供稳定数据输入 | evidence:homeSections 纯函数 selector 已实现(selectMostPopularPosts/selectRecentPosts/selectHomeHighlights),无 window/localStorage 访问 | evidence:recentPosts 按 date desc 选择,并支持 excludeIds;popularPosts 支持 config curated 映射+fallback | evidence:npm run build 已通过(无 SSR 报错) | done_at:2025-12-31T10:34:36"
"HOMEHL-060","P0","5","frontend","新增 HomeHighlights 组件（双栏卡片 + 简洁列表）","新增首页模块组件，按杂志式布局渲染 Most Popular 与 Recent Posts 两个板块，并复用现有卡片样式体系。","组件在 desktop 为两列（Most Popular / Recent），mobile 为单列；每个板块包含标题与列表项；列表项点击可跳转到文章；可选“查看全部”链接可用。","AUTOFRONTEND","Review 组件结构是否语义清晰（标题/列表）；确认复用 .s-card 与现有 PostList simple 样式不会引入样式冲突；确认 props/依赖最小化。","回归时检查与 PostList、TypeBar、Aside 的布局不冲突；在不同文章数量/缺失字段情况下 UI 不崩坏。","已完成","已完成","已完成","已提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:41;.vitepress/theme/components/List/PostList.vue:1;.vitepress/theme/style/main.scss:200;.vitepress/theme/views/Home.vue:6;.vitepress/theme/components/HomeHighlights.vue:1;.vitepress/theme/utils/homeSections.mjs:149;.vitepress/theme/style/main.scss:200","picked_reason:先落地 UI 组件,后续接入 Home.vue 时只需插入与条件判断 | evidence:新增 HomeHighlights.vue(两列网格+移动端单列),每列包含标题/查看全部/列表项(标题+日期) | evidence:列表项使用内部链接跳转到文章 regularPath | evidence:npm run build 已通过(确保组件编译无误) | done_at:2025-12-31T10:38:20"
"HOMEHL-070","P0","6","frontend","在 Home.vue 接入 HomeHighlights（仅首页首屏）","把 HomeHighlights 插入首页文章列表区域开头，并严格限制展示条件，避免影响分类/标签/分页页。","HomeHighlights 仅在 / 的第一页渲染；/page/2+、分类页、标签页不渲染；现有分页/文章列表/Aside 行为不变。","AUTOFRONTEND","Review shouldShowHighlights 逻辑是否与现有 getCurrentPage 兼容；确认不会引入 window 分支导致 SSR 差异；确认组件加载顺序不影响首屏性能。","回归时验证路由切换与滚动恢复逻辑不受影响；首次加载与客户端跳转场景下显示条件一致。","未开始","未开始","未开始","未提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:48;.vitepress/theme/views/Home.vue:1;.vitepress/theme/views/Home.vue:74;page/[num].md:1",""
"HOMEHL-080","P1","7","frontend","补齐首页 Highlights 样式与响应式细节","为 HomeHighlights 增加与现有设计系统一致的 SCSS，包括网格布局、间距、hover 态与断点适配。","使用 display:grid + gap 实现布局；1200px 与 768px 下布局符合预期；不新增全局变量/不破坏现有 .s-card；暗色模式下对比度可读。","AUTOFRONTEND","Review 样式是否局部化（scoped）且不会污染全局；确认 CSS 变量使用一致；确认无明显 CLS/布局抖动。","回归时检查不同浏览器宽度下的断点表现；确认与 Home.vue 现有 scoped 样式不冲突。","未开始","未开始","未开始","未提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:52;.vitepress/theme/style/main.scss:5;.vitepress/theme/style/main.scss:200;.vitepress/theme/views/Home.vue:131",""
"HOMEHL-090","P0","8","frontend","验证与回归：多路由 + 构建 SSR","执行并记录基础回归路径，确保新增模块不破坏分类/分页/暗色模式，并且 build 通过。","本地验证 /、/page/2、/pages/categories/*、/pages/tags/*；npm run build 成功且无 SSR 报错；暗色模式下模块可读且 hover 正常；控制台无关键报错。","AUTOE2E","Review 需包含可复现的验证步骤与截图/录屏（如团队要求）；确认关键路径覆盖分页、分类、标签与首页首屏。","回归时再次执行 npm run build + npm run preview 并抽查 3+ 篇文章页面；确认部署产物页面可正常访问且无运行时异常。","未开始","未开始","未开始","未提交","","plan/2025-12-31_09-58-40-home-most-popular-recent.md:57;package.json:18;page/[num].md:1;.vitepress/config.mjs:24",""
